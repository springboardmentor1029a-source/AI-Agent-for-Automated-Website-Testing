<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - QA-Pilot Agent</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <div class="logo-icon">Y</div>
                <span class="logo-text">QA-Pilot Agent</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M3 10L8 15L17 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>New Test</span>
            </a>
            <a href="#" class="nav-item" onclick="showReports(); return false;">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M9 17H6C5.46957 17 4.96086 16.7893 4.58579 16.4142C4.21071 16.0391 4 15.5304 4 15V5C4 4.46957 4.21071 3.96086 4.58579 3.58579C4.96086 3.21071 5.46957 3 6 3H10L14 7V10M13 17L15 19L19 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Test Reports</span>
            </a>
            <a href="/" class="nav-item">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M3 10L10 3L17 10M5 8V16C5 16.5304 5.21071 17.0391 5.58579 17.4142C5.96086 17.7893 6.46957 18 7 18H13C13.5304 18 14.0391 17.7893 14.4142 17.4142C14.7893 17.0391 15 16.5304 15 16V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Home</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="stats-card">
                <div class="stats-title">Tests Today</div>
                <div class="stats-value" id="tests-today">0</div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="page-title">Automated Testing Dashboard</h1>
                <p class="page-subtitle">Test your websites using natural language instructions</p>
            </div>
        </header>

        <!-- Test Input Section -->
        <section class="test-section" id="test-section">
            <div class="section-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <svg class="title-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Create New Test
                    </h2>
                    <span class="badge badge-success">AI Powered</span>
                </div>

                <form id="test-form" class="test-form">
                    <!-- URL Input -->
                    <div class="form-group">
                        <label class="form-label">
                            <svg class="label-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M14 2L8 8L14 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M8 2L2 8L8 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Target URL
                        </label>
                        <input 
                            type="text" 
                            id="target-url" 
                            class="form-input" 
                            placeholder="https://www.google.com, https://www.amazon.com, etc."
                            value="https://www.google.com"
                        />
                    </div>

                    <!-- Browser & Mode Row -->
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                <svg class="label-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Browser
                            </label>
                            <select id="browser-type" class="form-select">
                                <option value="chromium">üåê Chrome / Chromium</option>
                                <option value="firefox">ü¶ä Firefox</option>
                                <option value="webkit">üß≠ Safari / WebKit</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <svg class="label-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M8 2v12M2 8h12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                </svg>
                                Execution Mode
                            </label>
                            <select id="execution-mode-select" class="form-select">
                                <option value="headless">‚ö° Headless (Fast)</option>
                                <option value="visible">üëÅÔ∏è Visible (Watch Live)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Test Instructions -->
                    <div class="form-group">
                        <label class="form-label">
                            <svg class="label-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M7 3H3C2.44772 3 2 3.44772 2 4V13C2 13.5523 2.44772 14 3 14H12C12.5523 14 13 13.5523 13 13V9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M14 2L8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            Test Instructions (Natural Language)
                        </label>
                        <textarea 
                            id="test-instruction" 
                            class="form-textarea" 
                            rows="6"
                            placeholder="Example:
go to google.com and search for 'best AI tools 2025'
click the first result
verify page loads successfully"
                        ></textarea>
                        <div class="form-hint">
                            üí° Write your test steps in plain English - the AI will handle the rest!
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="clearForm()">
                            <svg class="btn-icon" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                <path d="M14 4L4 14M4 4L14 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            Clear
                        </button>
                        <button type="submit" class="btn btn-primary" id="run-test-btn">
                            <svg class="btn-icon" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                <path d="M6 3L14 9L6 15V3Z" fill="currentColor"/>
                            </svg>
                            Run Test
                        </button>
                    </div>
                </form>

                <!-- Quick Examples -->
                <div class="examples-section">
                    <h3 class="examples-title">Quick Start Examples</h3>
                    <div class="examples-grid">
                        <div class="example-card" onclick="loadExample('google')">
                            <div class="example-icon">üîç</div>
                            <div class="example-title">Google Search</div>
                        </div>
                        <div class="example-card" onclick="loadExample('amazon')">
                            <div class="example-icon">üõí</div>
                            <div class="example-title">Amazon Product</div>
                        </div>
                        <div class="example-card" onclick="loadExample('login')">
                            <div class="example-icon">üîê</div>
                            <div class="example-title">Login Flow</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Loading State -->
        <div class="loading-state" id="loading-state" style="display: none;">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <h3 class="loading-title">AI Agent Working...</h3>
                <div class="loading-steps" id="loading-steps">
                    <div class="loading-step">
                        <div class="step-icon">‚è≥</div>
                        <div class="step-text">Parsing your instructions...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <section class="results-section" id="results-section" style="display: none;">
            <div class="section-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <svg class="title-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Test Results
                    </h2>
                    <button class="btn btn-sm btn-secondary" onclick="showTestForm()">New Test</button>
                </div>

                <div class="results-summary" id="results-summary">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="results-details" id="results-details">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </section>
    </main>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
